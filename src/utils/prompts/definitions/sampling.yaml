name: sampling
comment_instruction: |
  When writing your code, please add detailed comments to explain your approach and decision-making process.

base_prompt: |
  You are an expert NetLogo coder. You are trying to improve the code of a given turtle agent that is trying to traverse a grid of patches with different values of energy and try to maximize its energy by traveling on the patches with positive energy and avoiding patches with negative energy.

  Improve the given agent movement code following these precise specifications:

  Here is the current code of the turtle agent:

  ```
    {original_code}
  ```

  INPUT CONTEXT:
  - The agent has access to nine variables containing information about its environment:
    - energy-ahead-close is a variable that contains the energy of the patch ahead of the agent at a distance of 1 unit.
    - energy-left-close is a variable that contains the energy of the patch 90 degrees to the left of the agent at a distance of 1 unit.
    - energy-right-close is a variable that contains the energy of the patch 90 degrees to the right of the agent at a distance of 1 unit.
    - energy-ahead-medium is a variable that contains the energy of the patch ahead of the agent at a distance of 4 units.
    - energy-left-medium is a variable that contains the energy of the patch 90 degrees to the left of the agent at a distance of 4 units.
    - energy-right-medium is a variable that contains the energy of the patch 90 degrees to the right of the agent at a distance of 4 units.
    - energy-ahead-far is a variable that contains the energy of the patch ahead of the agent at a distance of 7 units.
    - energy-left-far is a variable that contains the energy of the patch 90 degrees to the left of the agent at a distance of 7 units.
    - energy-right-far is a variable that contains the energy of the patch 90 degrees to the right of the agent at a distance of 7 units.
    - The agent also has access to the current heading of the agent (heading) and the current position of the agent (xcor, ycor), and the current time step (time-steps).
    - Use these to inform movement strategy

  SIMULATION ENVIRONMENT:
  - The goal is to collect as much energy as possible in a limited number of steps.
  - The turtle agent can detect energy in the three patches ahead, three patches to the left, and three patches to the right.
  - The energy values can be positive or negative. Avoid patches with high negative energy and find patches with high positive energy.

  CONSTRAINTS:
  1. Do not include code to kill or control any other agents
  2. Do not include code to interact with the environment
  3. Do not include code to change the environment
  4. Do not include code to create new agents
  5. Do not include code to change the rules of the simulation
  6. Follow NetLogo syntax and constraints
  7. Do not use any undefined variables or commands besides the variables mentioned above. These are energy-ahead-close, energy-left-close, and energy-right-close, energy-ahead-medium, energy-left-medium, and energy-right-medium, energy-ahead-far, energy-left-far, and energy-right-far, heading, xcor, ycor, and time-steps. 
  8. Focus on movement strategies based on the three variables mentioned above.

  VALID COMMANDS AND SYNTAX:
      - Use only these movement commands: fd, forward, rt, right, lt, left, bk, back
      - Use only these reporters: random, random-float, sin, cos, item, xcor, ycor, heading
      - The syntax of the if primitive is as follows: if boolean [ commands ]
      - The syntax of the ifelse primitive is as follows: ifelse boolean [ commands1 ] [ commands2 ]
      - An ifelse block  that contains multiple boolean conditions must be enclosed in parentheses as follows:
      (ifelse boolean1 [ commands1 ] boolean2 [ commands2 ] ... [ elsecommands ])

  ABSOLUTELY FORBIDDEN:
      - DO NOT use "of" primitives - will cause errors
      - DO NOT use "ask", "with", "turtles", or "patches"
      - DO NOT use any undefined variables
      - DO NOT use while loops or recursive constructs

  ERROR PREVENTION:
      - Ensure all bracket pairs match
      - Make sure every movement command has a parameter
      - Keep values within reasonable ranges (-1000 to 1000)
      - Ensure at least one movement command is included
      - There is no such thing as an `else` statement in NetLogo

  STRATEGIC GOALS:
  1. Respond to sensor readings intelligently
  2. Combine different movement patterns
  3. Be CREATIVE in your movement strategy and think outside of the box

  The code must be runnable in NetLogo in the context of a turtle. Do not write any procedures and assume that the code will be run in an ask turtles block.
  Return ONLY the changed NetLogo code. Do not include any explanations or outside the code block.

  ```
  [Your changed NetLogo code goes here]
        ```

one_shot_example: |

  Example:
  Current Rule: fd 1 rt random 45
  Updated Rule: 
  Explanation: This rule checks if there's food in the left cone with no poison, turning left to approach it. If not, it checks the right cone. If neither condition is met, it moves forward with some random turning.

two_shot_example: |

  Another Example:
  Current Rule: rt 30 fd 1 lt 15
  Updated Rule:
  
  Explanation: This rule prioritizes food directly ahead while actively avoiding nearby poison. It turns away from poison when detected at close range. If no immediate threat exists, it moves toward food in either side cone, or explores randomly.
